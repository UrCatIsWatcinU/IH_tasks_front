<template>
    <div class="navbar">
        <NavBtn 
            v-for="tab in tabs" 
            :key="tab.tabName" 
            :tab="tab"
            @changeTab="changeTab"    
            @toPreviousTab="toPreviousTab"    
        />
    </div>
</template>

<script>
import NavBtn from './nav-btn.vue'
export default {
    components: {
        NavBtn: NavBtn
    },
    data(){
        return {
            tabs: [
                {
                    tabName: 'Main',
                    title:'Главная',
                    btnHtml: '<path d="M28 84V44H52V84M4 32L40 4L76 32V76C76 78.1217 75.1571 80.1566 73.6569 81.6569C72.1566 83.1571 70.1217 84 68 84H12C9.87827 84 7.84344 83.1571 6.34315 81.6569C4.84285 80.1566 4 78.1217 4 76V32Z" />',
                    isActive: true,
                    viewBox: '0 0 80 88'
                },
                {
                    tabName: 'Calendar',
                    title:'Календарь',
                    btnHtml: '<path d="M56.0001 4V20M24 4V20M4 36H76M12 12H68C72.4183 12 76 15.5817 76 20V76C76 80.4183 72.4183 84 68 84H12C7.58172 84 4 80.4183 4 76V20C4 15.5817 7.58172 12 12 12Z"/>',
                    viewBox: '0 0 80 88',
                    addon: {
                        class: 'nav-calendar-text',
                        text: this.$now().getDate()
                    }
                },
                {
                    tabName: 'Create',
                    title: 'Создать',
                    btnHtml: '<line x1="40" y1="0" x2="40" y2="80" ></line><line x1="0" y1="40" x2="80" y2="40"></line>',
                    viewBox: '0 0 80 80'
                },
                {
                    tabName: 'Statistics',
                    title:'Статистика',
                    btnHtml: '<path d="M80.8401 59.5589C78.2954 65.5767 74.3153 70.8795 69.2478 75.0038C64.1803 79.128 58.1796 81.9481 51.7704 83.2175C45.3612 84.4869 38.7386 84.167 32.4816 82.2856C26.2246 80.4043 20.5238 77.0188 15.8775 72.4252C11.2311 67.8317 7.78079 62.1698 5.82812 55.9347C3.87544 49.6997 3.47987 43.0812 4.67599 36.6579C5.87211 30.2346 8.6235 24.2021 12.6896 19.0878C16.7557 13.9735 22.0128 9.93315 28.0011 7.31993M84 43.9992C84 38.7464 82.9654 33.5451 80.9552 28.6922C78.9451 23.8392 75.9988 19.4298 72.2845 15.7155C68.5702 12.0012 64.1608 9.0549 59.3078 7.04476C54.4549 5.03461 49.2536 4 44.0008 4V43.9992H84Z"/>',
                },
                {
                    tabName: 'Sets',
                    title: 'Настройки',
                    btnHtml: '<path d="M44 54.9092C50.0249 54.9092 54.9091 50.025 54.9091 44.0001C54.9091 37.9752 50.0249 33.091 44 33.091C37.9751 33.091 33.0909 37.9752 33.0909 44.0001C33.0909 50.025 37.9751 54.9092 44 54.9092Z"/><path d="M70.9091 54.9091C70.425 56.0059 70.2806 57.2225 70.4945 58.4021C70.7084 59.5818 71.2708 60.6703 72.1091 61.5273L72.3273 61.7455C73.0035 62.4209 73.5399 63.223 73.9059 64.1059C74.2719 64.9888 74.4603 65.9352 74.4603 66.8909C74.4603 67.8467 74.2719 68.793 73.9059 69.6759C73.5399 70.5588 73.0035 71.3609 72.3273 72.0364C71.6518 72.7126 70.8497 73.249 69.9668 73.615C69.0839 73.981 68.1376 74.1694 67.1818 74.1694C66.2261 74.1694 65.2797 73.981 64.3968 73.615C63.5139 73.249 62.7118 72.7126 62.0364 72.0364L61.8182 71.8182C60.9612 70.9799 59.8727 70.4175 58.6931 70.2036C57.5134 69.9897 56.2968 70.1341 55.2 70.6182C54.1245 71.0791 53.2072 71.8445 52.5611 72.8201C51.915 73.7957 51.5683 74.939 51.5636 76.1091V76.7273C51.5636 78.6561 50.7974 80.506 49.4335 81.8699C48.0696 83.2338 46.2198 84 44.2909 84C42.3621 84 40.5122 83.2338 39.1483 81.8699C37.7844 80.506 37.0182 78.6561 37.0182 76.7273V76.4C36.99 75.1964 36.6004 74.0291 35.9 73.0498C35.1996 72.0706 34.2209 71.3247 33.0909 70.9091C31.9941 70.425 30.7775 70.2806 29.5979 70.4945C28.4182 70.7084 27.3297 71.2708 26.4727 72.1091L26.2545 72.3273C25.5791 73.0035 24.777 73.5399 23.8941 73.9059C23.0112 74.2719 22.0648 74.4603 21.1091 74.4603C20.1533 74.4603 19.207 74.2719 18.3241 73.9059C17.4412 73.5399 16.6391 73.0035 15.9636 72.3273C15.2874 71.6518 14.751 70.8497 14.385 69.9668C14.019 69.0839 13.8306 68.1376 13.8306 67.1818C13.8306 66.2261 14.019 65.2797 14.385 64.3968C14.751 63.5139 15.2874 62.7118 15.9636 62.0364L16.1818 61.8182C17.0201 60.9612 17.5825 59.8727 17.7964 58.6931C18.0103 57.5134 17.8659 56.2968 17.3818 55.2C16.9209 54.1245 16.1555 53.2072 15.1799 52.5611C14.2043 51.915 13.061 51.5683 11.8909 51.5636H11.2727C9.34388 51.5636 7.49403 50.7974 6.13013 49.4335C4.76623 48.0696 4 46.2198 4 44.2909C4 42.3621 4.76623 40.5122 6.13013 39.1483C7.49403 37.7844 9.34388 37.0182 11.2727 37.0182H11.6C12.8036 36.99 13.9709 36.6004 14.9502 35.9C15.9294 35.1996 16.6753 34.2209 17.0909 33.0909C17.575 31.9941 17.7194 30.7775 17.5055 29.5979C17.2916 28.4182 16.7292 27.3297 15.8909 26.4727L15.6727 26.2545C14.9965 25.5791 14.4601 24.777 14.0941 23.8941C13.7281 23.0112 13.5397 22.0648 13.5397 21.1091C13.5397 20.1533 13.7281 19.207 14.0941 18.3241C14.4601 17.4412 14.9965 16.6391 15.6727 15.9636C16.3482 15.2874 17.1503 14.751 18.0332 14.385C18.9161 14.019 19.8624 13.8306 20.8182 13.8306C21.7739 13.8306 22.7203 14.019 23.6032 14.385C24.4861 14.751 25.2882 15.2874 25.9636 15.9636L26.1818 16.1818C27.0388 17.0201 28.1273 17.5825 29.307 17.7964C30.4866 18.0103 31.7032 17.8659 32.8 17.3818H33.0909C34.1664 16.9209 35.0837 16.1555 35.7298 15.1799C36.3759 14.2043 36.7226 13.061 36.7273 11.8909V11.2727C36.7273 9.34388 37.4935 7.49403 38.8574 6.13013C40.2213 4.76623 42.0712 4 44 4C45.9288 4 47.7787 4.76623 49.1426 6.13013C50.5065 7.49403 51.2727 9.34388 51.2727 11.2727V11.6C51.2774 12.7701 51.6241 13.9134 52.2702 14.889C52.9163 15.8646 53.8336 16.63 54.9091 17.0909C56.0059 17.575 57.2225 17.7194 58.4021 17.5055C59.5818 17.2916 60.6703 16.7292 61.5273 15.8909L61.7455 15.6727C62.4209 14.9965 63.223 14.4601 64.1059 14.0941C64.9888 13.7281 65.9352 13.5397 66.8909 13.5397C67.8467 13.5397 68.793 13.7281 69.6759 14.0941C70.5588 14.4601 71.3609 14.9965 72.0364 15.6727C72.7126 16.3482 73.249 17.1503 73.615 18.0332C73.981 18.9161 74.1694 19.8624 74.1694 20.8182C74.1694 21.7739 73.981 22.7203 73.615 23.6032C73.249 24.4861 72.7126 25.2882 72.0364 25.9636L71.8182 26.1818C70.9799 27.0388 70.4175 28.1273 70.2036 29.307C69.9897 30.4866 70.1341 31.7032 70.6182 32.8V33.0909C71.0791 34.1664 71.8445 35.0837 72.8201 35.7298C73.7957 36.3759 74.939 36.7226 76.1091 36.7273H76.7273C78.6561 36.7273 80.506 37.4935 81.8699 38.8574C83.2338 40.2213 84 42.0712 84 44C84 45.9288 83.2338 47.7787 81.8699 49.1426C80.506 50.5065 78.6561 51.2727 76.7273 51.2727H76.4C75.2299 51.2774 74.0866 51.6241 73.111 52.2702C72.1354 52.9163 71.37 53.8336 70.9091 54.9091Z"/>',
                },
            ],
            previousTab: 'Main'
        }   
    },
    methods: {
        changeTab(tab){
            this.previousTab = this.$parent.activeTab;
            this.$children.forEach(btn => {
                if(btn.tabName != tab.tabName) btn.isActive = false
                else btn.isActive = true;
            });

            this.$emit('changeTab', tab);
        },
        toPreviousTab(){
            this.changeTab(this.tabs.filter(t => t.tabName == this.previousTab)[0])
        }
    }
}
</script>

<style>
.navbar{
    padding: 0 var(--pad);
    background-color: #F4F6F7;
    display: flex;
    justify-content: space-around;
    align-items: center;
    height: 50px;
}
.nav-tab{
    --size: 27.5px;
    height: var(--size);
    width: var(--size);
    cursor: pointer;
}
.nav-active > *{
    stroke: var(--basic-c) !important;
    color: var(--basic-c) !important;
}
.nav-create{
    height: 60px;
    width: 62px;
    background-color: var(--basic-c);
    border-radius: 38px;
    padding: 15px;
    box-sizing: border-box;
    position: relative;
    bottom: 25px;
    display: flex;
    justify-content: center;
    align-items: center;
    /* filter: drop-shadow(var(--dr)); */
    border: 5px var(--bgc) solid;
    box-shadow: 0px 25px 40px 0px rgba(250, 188, 88, 0.25);
}
.nav-create.nav-active{
    background-color: var(--red-c);
}
.nav-create > svg{
    stroke-width: 6px;
    stroke: var(--bgc) !important;
    transition: var(--trans);
}
.nav-create.nav-active > svg{
    transform: rotate(45deg);
}
.nav-icon{
    height: 100%;
    stroke: var(--grey-c);
    stroke-width: 7px;
    fill: none;
    stroke-linecap: round;
    stroke-linejoin: round;
}
.nav-calendar{
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}
.nav-calendar-text{
    font-size: 11px;
    font-weight: bold;
    position: absolute;
    bottom: 4px;
    color: var(--grey-c)
}
</style>